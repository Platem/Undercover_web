function setupGame(){players=$("#players-count").text(),undercover=$("#undercover-count").text(),keyword=language.words[generateRandomInt(0,language.words.length)],turns=[];let e=language.player;for(let t=1;t<=players;t++)t==players?turns.push({player:e+" "+t,under:!1,word:keyword,next:language.search}):turns.push({player:e+" "+t,under:!1,word:keyword,next:e+" "+(t+1)});let t=[];for(let e=0;e<undercover;e++){let n=!1,r=generateRandomInt(0,players);for(let a=0;a<t.length;a++)r===t[a]&&(n=!0,e--);n||t.push(r)}for(let e of t)turns[e].under=!0,turns[e].word=language.title;turns.push({player:language.decide+" ("+undercover+")",under:!1,word:"",next:language.finish});let n="SoluciÃ³n: "+turns[t[0]].player;for(let e=1;e<t.length;e++)n+=", "+turns[t[e]].player;turns.push({player:n,under:!1,word:keyword,next:language.repeat})}function startGame(){currentTurn=0,makeTurn(),$("#wrapper").addClass("playing")}function makeTurn(){$("#current-word .text").text(""),$("#current-word .text").removeClass("show");let e=10;currentTurn==turns.length&&(e=400,setupGame(),currentTurn=0),setTimeout(function(){let e=turns[currentTurn];currentTurn===turns.length-2?$("#current-word").hide():($("#current-word").show(),currentTurn===turns.length-1&&$("#current-word .text").addClass("show"));let t=400;0===currentTurn&&(t=20),$("#play").animate({opacity:0},t,function(){$("#current-player").text(e.player),$("#current-word .text").text(e.word),$("#next-turn").text(e.next)}),setTimeout(function(){$("#play").animate({opacity:1},400)},t),currentTurn++},e)}let language,theme,players,undercover,keyword,currentTurn,turns=[];$(function(){$("#settings-btn").on("click",function(e){$("#settings").addClass("show")}),$("#settings-close").on("click",function(e){$("#settings").removeClass("show")}),$("#lang-select").on("change",function(e){let t=$(this).val();language=localization[t],localize(language),applyUrlParams(language,theme)}),$("#theme-select").on("change",function(e){theme=$(this).val(),themify(theme),applyUrlParams(language,theme)}),window.onpopstate=function(e){language=checkLanguage(),theme=checkTheme(),localize(language),themify(theme)},$("#back-btn").on("click",function(e){$("#wrapper").removeClass("playing")}),$("#players-less").on("click",function(e){let t=$("#players-count").text();$("#players-count").text(Math.max(--t,1))}),$("#players-more").on("click",function(e){let t=$("#players-count").text();$("#players-count").text(Math.max(++t,1))}),$("#undercover-less").on("click",function(e){let t=$("#undercover-count").text(),n=$("#players-count").text();$("#undercover-count").text(Math.min(Math.max(--t,1),n-1))}),$("#undercover-more").on("click",function(e){let t=$("#undercover-count").text(),n=$("#players-count").text();$("#undercover-count").text(Math.min(Math.max(++t,1),Math.floor(n/2)))}),$("#play-btn").on("click",function(e){setupGame(),startGame()}),$("#toggle-word").on("click",function(e){$("#current-word .text").toggleClass("show")}),$("#next-turn").on("click",function(e){makeTurn()}),language=checkLanguage(),theme=checkTheme(),localize(language),themify(theme),applyUrlParams(language,theme),$("#wrapper").addClass("loaded"),self.addEventListener("install",function(e){e.waitUntil(caches.open(cacheName).then(function(e){return e.addAll(["/assets/img/add.svg","/assets/img/back.svg","/assets/img/gear.svg","/assets/img/minus.svg","/assets/img/add-theme-dark.svg","/assets/img/back-theme-dark.svg","/assets/img/gear-theme-dark.svg","/assets/img/minus-theme-dark.svg","/assets/css/main.min.css","/assets/js/jquery-3.3.1.min.js","/assets/js/util.min.js","/assets/js/words.min.js","/assets/js/localization.min.js","/assets/js/theming.min.js","/assets/js/main.min.js"])}))}),self.addEventListener("fetch",function(e){e.respondWith(caches.match(e.request).then(function(t){return t||fetch(e.request)}))})});