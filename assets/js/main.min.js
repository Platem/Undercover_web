function setupGame(){players=$("#players-count").text(),undercover=$("#undercover-count").text(),keyword=language.words[generateRandomInt(0,language.words.length)],turns=[];let e=language.player;for(let t=1;t<=players;t++)t==players?turns.push({player:e+" "+t,under:!1,word:keyword,next:language.search}):turns.push({player:e+" "+t,under:!1,word:keyword,next:e+" "+(t+1)});let t=[];for(let e=0;e<undercover;e++){let n=!1,r=generateRandomInt(0,players);for(let a=0;a<t.length;a++)r===t[a]&&(n=!0,e--);n||t.push(r)}for(let e of t)turns[e].under=!0,turns[e].word=language.title;turns.push({player:language.decide+" ("+undercover+")",under:!1,word:"",next:"Terminar"});let n="SoluciÃ³n: "+turns[t[0]].player;for(let e=1;e<t.length;e++)n+=", "+turns[t[e]].player;turns.push({player:n,under:!1,word:keyword,next:"Repetir"})}function startGame(){currentTurn=0,makeTurn(),$("#wrapper").addClass("playing")}function makeTurn(){currentTurn==turns.length&&(setupGame(),currentTurn=0),$("#current-word .text").text(""),$("#current-word .text").removeClass("show");let e=turns[currentTurn];currentTurn===turns.length-2?$("#current-word").hide():($("#current-word").show(),currentTurn===turns.length-1&&$("#current-word .text").addClass("show"));let t=400;0===currentTurn&&(t=20),$("#play").animate({opacity:0},t,function(){$("#current-player").text(e.player),$("#current-word .text").text(e.word),$("#next-turn").text(e.next)}),setTimeout(function(){$("#play").animate({opacity:1},400)},t),currentTurn++}let language,players,undercover,keyword,currentTurn,turns=[];$(function(){$("#lang-select").on("change",function(e){let t=$(this).val(),n=location.origin+"/?lan="+t;history.pushState(null,"Undercover",n),language=checkLanguage(),localize(language)}),window.onpopstate=function(e){language=checkLanguage(),localize(language)},$("#back-btn").on("click",function(e){$("#wrapper").removeClass("playing")}),$("#players-less").on("click",function(e){let t=$("#players-count").text();$("#players-count").text(Math.max(--t,1))}),$("#players-more").on("click",function(e){let t=$("#players-count").text();$("#players-count").text(Math.max(++t,1))}),$("#undercover-less").on("click",function(e){let t=$("#undercover-count").text(),n=$("#players-count").text();$("#undercover-count").text(Math.min(Math.max(--t,1),n-1))}),$("#undercover-more").on("click",function(e){let t=$("#undercover-count").text(),n=$("#players-count").text();$("#undercover-count").text(Math.min(Math.max(++t,1),Math.floor(n/2)))}),$("#play-btn").on("click",function(e){setupGame(),startGame()}),$("#toggle-word").on("click",function(e){$("#current-word .text").toggleClass("show")}),$("#next-turn").on("click",function(e){makeTurn()}),language=checkLanguage(),localize(language),$("#wrapper").addClass("loaded")});